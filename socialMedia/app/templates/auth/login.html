<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .login-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      width: 800px;
      height: 500px;
      display: flex;
    }

    .welcome-section {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
      flex: 1;
      padding: 60px 40px;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .welcome-title {
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: -0.025em;
      margin-bottom: 16px;
    }

    .welcome-subtitle {
      font-size: 1rem;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .welcome-description {
      font-size: 0.9rem;
      line-height: 1.5;
      opacity: 0.9;
    }

    .form-section {
      flex: 1;
      padding: 60px 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .form-header {
      margin-bottom: 32px;
    }

    .form-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .form-subtitle {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      color: #374151;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.2s, box-shadow 0.2s;
      background: white;
    }

    .form-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .forgot-password {
      text-align: right;
      margin-bottom: 24px;
    }

    .forgot-password a {
      color: #2563eb;
      text-decoration: none;
      font-size: 0.875rem;
    }

    .forgot-password a:hover {
      text-decoration: underline;
    }

    .remember-me {
      display: flex;
      align-items: center;
      margin-bottom: 24px;
    }

    .remember-me input {
      margin-right: 8px;
    }

    .remember-me label {
      font-size: 0.875rem;
      color: #374151;
    }

    .sign-in-btn {
      width: 100%;
      background: #2563eb;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-bottom: 16px;
    }

    .sign-in-btn:hover {
      background: #1d4ed8;
    }

    .signup-link {
      text-align: center;
      font-size: 0.875rem;
      color: #6b7280;
    }

    .signup-link a {
      color: #2563eb;
      text-decoration: none;
    }

    .signup-link a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .login-container {
        width: 90%;
        height: auto;
        flex-direction: column;
      }

      .welcome-section {
        padding: 40px 30px;
      }

      .form-section {
        padding: 40px 30px;
      }
    }
  </style>
</head>

<body>
  <div class="login-container">
    <div class="welcome-section">
      <h1 class="welcome-title">WELCOME BACK!</h1>
      <p class="welcome-subtitle">We're Good To See You Back</p>
      <p class="welcome-description">
        Discover your next favorite book, continue where you left off, or explore fresh arrivals. From timeless classics
        to trending titles, your personal library is just a sign-in away.
        Grab a cup of coffee and let the reading begin.
      </p>
    </div>

    <div class="form-section">
      <div class="form-header">
        <h2 class="form-title">Sign in</h2>
        <p class="form-subtitle">Welcome back! Please sign in to your account</p>
      </div>

      <form>
        <div class="form-group">
          <label class="form-label" for="email">Email</label>
          <input type="text" id="email" name="email" class="form-input" placeholder="Enter Your Email...">
        </div>

        <div class="form-group">
          <label class="form-label" for="password">Password</label>
          <input type="password" id="password" name="password" class="form-input" placeholder="Enter Your Password...">
        </div>



        <button type="submit" class="sign-in-btn">Sign In</button>

        <p class="signup-link">
          Don't have an account? <a href="{% url 'register' %}">Sign Up</a>
        </p>
      </form>
    </div>
  </div>
  <script>
    function handleLogin(event) {
      event.preventDefault();

      const formData = new FormData(document.getElementById('loginForm'));
      const loginData = {};
      formData.forEach((value, key) => {
        loginData[key] = value;
      });

      // Hide previous error message
      const errorMessage = document.getElementById('errorMessage');
      errorMessage.style.display = 'none';

      // Show loading state
      const submitButton = event.target.querySelector('.login-button');
      const originalText = submitButton.textContent;
      submitButton.textContent = 'Entering...';
      submitButton.disabled = true;

      // Send login request to Django backend
      fetch('http://127.0.0.1:8000/login/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(loginData)
      })
        .then(response => response.json())
        .then(data => {
          console.log(data);
          if (data.success) {
            window.location.href = data.redirect_url || '{% url "home" %}';
          } else {
            showError(data.message || 'Invalid credentials. Please try again.');
          }
        })
        .catch(error => {;
          console.error('Error:', error);
          showError('A connection error occurred. Please try again.');
        })
        .finally(() => {
          submitButton.textContent = originalText;
          submitButton.disabled = false;
        });
    }

    function showError(message) {
      const errorMessage = document.getElementById('errorMessage');
      errorMessage.textContent = message;
      errorMessage.style.display = 'block';

      // Add shake animation to the form
      const loginPanel = document.querySelector('.login-panel');
      loginPanel.style.animation = 'shake 0.5s ease-in-out';

      setTimeout(() => {
        loginPanel.style.animation = '';
      }, 500);
    }

    // Function to get CSRF token (for Django)
    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }

    // Add interactive effects
    document.querySelectorAll('.form-input').forEach(input => {
      input.addEventListener('focus', function () {
        this.parentElement.style.transform = 'translateY(-2px)';
      });

      input.addEventListener('blur', function () {
        this.parentElement.style.transform = 'translateY(0)';
      });

      // Clear error message when user starts typing
      input.addEventListener('input', function () {
        const errorMessage = document.getElementById('errorMessage');
        if (errorMessage.style.display !== 'none') {
          errorMessage.style.display = 'none';
        }
      });
    });

    // Auto-focus email field on page load
    window.addEventListener('load', function () {
      document.getElementById('email').focus();
    });
  </script>
</body>

</html>